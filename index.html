<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>VS Boilerplate</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="./css/bootstrap.css">
	<link rel="stylesheet" href="./css/style.css">
	<!-- stylesheet -->
	<link rel='stylesheet' href='css/show-your-terms.min.css'>
	 
	<link rel="icon" type="image/png" href="img/favicon.png"/>

</head>

<body>
	<div class="container-fluid">
		<aside class="col-md-2 col-md-offset-1">
			<ul class="col-md-2 col-md-offset-1 navbar-fixed-top">
			<div class="center-block" style="padding: 15px 15px 20px 15px">
				<img src="img/vsboilerplate.svg" width="100%" alt="VS Boilerplate - Otimização de recursos FrontEnd">
				<small class="pull-right">Versão 1.0.0</small>
			</div>

				<a class="list-group-item" href="#introducao">Introdução</a>
				<a class="list-group-item" href="#pre-requisito">Pré-requisitos</a>
				<a class="list-group-item" href="#instalacao">Instalação</a>
				<a class="list-group-item" href="#utilizacao">Utilização</a>
				<a class="list-group-item" href="#estrutura">Estrutura</a>
				<ul class="sub-list">
					<a class="list-group-item" href="#estrutura-css">CSS</a>
					<ul class="sub-list">
						<a class="list-group-item" href="#estrutura-css-globals">Globals</a>
						<a class="list-group-item" href="#estrutura-css-templates">Templates</a>
						<a class="list-group-item" href="#estrutura-css-modules">Modules</a>
					</ul>
					<a class="list-group-item" href="#estrutura-js">JS</a>
					<a class="list-group-item" href="#estrutura-img">IMG</a>
					<a class="list-group-item" href="#estrutura-font">Font</a>
				</ul>
				<a class="list-group-item" href="#recomendacoes">Recomendações</a>
			</ul>
		</aside>
		<div class="col-md-7">
			<section id="introducao" class="row">
				<h2>
					Introdução
				</h2>			
				<hr>
				<p>O Vs Boilerplate é uma estrutura de workflow desenvolvida para atender as demandas de desenvolvimento frontend da Virtual Sistemas.</p>
				<p>Nele constam atualmente as seguintes <b>funcionalidades</b>:</p>
				 <ul>
					<li>Compilação Stylus - Compila arquivos CSS escritos em Stylus Lang</li>
					<li>Autoprefixer CSS - Torna o CSS compátivel com todos os browsers</li>
					<li>Compressor CSS - Otimiza o CSS para carregamento mais rápido</li>
					<li>Concatenação de arquivos - Concatena arquivos JS para evitar requisições HTTP</li>
					<li>Otimização de JS - Otimiza o Javascript (uglify) para carregamento mais rápido</li>
					<li>Otimização de imagens - Otimiza imagens para tornar o sistema mais leve</li>
					<li>Conversão de fontes para CSS - Converte fontes truetype em arquivos CSS</li>
				 </ul>
			</section>
			<section id="pre-requisito" class="row">
				<h2>
					Pré-requisitos
				</h2>
				<hr>

					O Vs Boilerplate funciona através do gerenciador de dependências do <b><a href="https://nodejs.org/en/" target="_blank">NodeJS</a></b>, para tal é necessário que se tenha instalado em sua máquina a versão mais recente do NodeJS</p>
				<p>
					Tendo instalado o NodeJS iremos utilizar seu gerenciador de pacotes, NPM, para instalar e gerenciar todas as dependencias do Vs Boilerplate.
				</p>
			</section>
			<section id="instalacao" class="row">
				<h2>
					Instalação
				</h2>
				<hr>
				<p>
					Para instalar o VS Boilerplate é necessário criar o arquivo <kbd>package.json</kbd> e o arquivo <kbd>gulpfile.js</kbd> no diretório raiz do projeto web.
				</p>					
				<p>
					Os arquivos devem seguir as configurações mínimas abaixo:

				</p>
				<p>
					<button type="button" class="btn btn-primary btn-md" data-toggle="modal" data-target="#gulpfile">gulpfile.js</button>
					<button type="button" class="btn btn-primary btn-md" data-toggle="modal" data-target="#package">package.json</button>

				</p>
				<div class="alert alert-danger" role="alert">
					Esta seção é destinada à instalação da estrutura em num novo projeto, para utilização das funcionalidades com o VS Boilerplate já instalado veja: <a href="#utilizacao">Utilização</a>
				</div>
				Após criar os arquivos:
				<ul>
					<li>
						1- Acesse a pasta raíz do projeto WEB através do prompt de comando:
						<div class="well well-sm">
							<kbd>cd C:\Users\NOME_DE_USUARIO\workspace\PROJETO\web</kbd>
						</div>
					</li>
					<li>
						2- Instale todas as depêndencias necessárias ao projeto com o comando:
						<div class="well well-sm">
							<kbd>
								npm install
							</kbd>
						</div>
					</li>
					<li>
						3- Inicialize o Gulp com o comando:
						<div class="well well-sm">
							<kbd>
								gulp vsboilerplate	
							</kbd>
						</div>
						<p>Este comando irá gerar a estrutura de pastas do boilerplate.</p>

					</li>
					<div class='showyourterms instalacao-cmd dark well well-sm'>
						<div class='type' data-action='command' data-delay='400'>cd C:\Users\NOME_DE_USUARIO\workspace\PROJETO\web</div>
						<div class='type' data-action='command' data-delay='400'>npm install</div>
						<div class='line yellow' data-delay='400'>Instala todas as depêndencias</div>
						<div class='type' data-action='command' data-delay='400'>gulp vsboilerplate</div>
						<div class='line yellow' data-delay='4000'>Estrutura de pastas gerada com sucesso!</div>					
					</div>
				</ul>

			</section>
			<section id="utilizacao" class="row">
				<h2>
					Utilização para desenvolvimento
				</h2>
				<hr>
				Para ativar as funcionalidades do VS Boilerplate:
				<ul>
					<li>
						1- Acesse a pasta raíz do projeto WEB através do prompt de comando:
						<div class="well well-sm">
							<kbd>cd C:\Users\NOME_DE_USUARIO\workspace\PROJETO\web</kbd>
						</div>
					</li>
					<li>
						2- Para instalar todas as depêndencias necessárias ao projeto execute o comando:
						<div class="well well-sm">
							<kbd>
								npm install
							</kbd>
						</div>
					</li>
					<li>
						3- Inicialize o Gulp com o comando:
						<div class="well well-sm">
							<kbd>
								gulp compile-all	
							</kbd>
						</div>
						<p>Este comando tornará ativas todas as funcionalidades.</p>
						<p>Sempre que houver qualquer alteração nos arquivos ou pastas automaticamente serão compilados
						e otimizados.</p>
					</li>
					<div class='showyourterms utilizacao-cmd dark well well-sm'>
						<div class='type' data-action='command' data-delay='400'>cd C:\Users\NOME_DE_USUARIO\workspace\PROJETO\web</div>
						<div class='type' data-action='command' data-delay='400'>npm install</div>
						<div class='line yellow' data-delay='400'>Instala todas as depêndencias</div>
						<div class='type' data-action='command' data-delay='400'>gulp compile-all</div>
						<div class='line yellow' data-delay='4000'>Ativa as funcionalidades</div>					
					</div>
					<li>
						Para desativar as funcionalidades basta fechar o prompt de comando ou teclar ctrl+c seguido da confirmação (s)
					</li>
				</ul>
        
			</section>
			<section id="estrutura" class="row">
				<h2>
					Estrutura
				</h2>
				<hr>
					Este boilerplate conta com a seguinte estrutura</p>

				<pre class="col-md-6">
  resources
  |_dist
	|_css
	  |_globals
	  |_templates
	|_fonts
	|_js
	  |_app
	  |_plugins
	|_img
  |_src
	|_css
	  |_globals
	  |_templates
	  |_modules
	|_fonts
	|_js
	  |_app
	  |_plugins
	|_img
				</pre>
				<div class="col-md-6">
					<div class="alert alert-info" role="alert">
						A pasta dist é onde ficam os arquivos otimizados e compilados prontos para a produção. 
					</div>
					<div class="alert alert-info" role="alert">
						A pasta src é onde ficam os arquivos onde damos manutenção e implementamos código.
					</div>
					<div class="alert alert-danger" role="alert">
						<b>Atenção!</b> A pasta dist foi feita para nunca ser alterada manualmente, uma vez que qualquer alteração manual nesta pasta será automaticamente sobreposta na próxima compilação.
					</div>
				</div>
			</section>
			<section id="estrutura-css" class="row">
				<div class="panel panel-default col-md-12">
					<div class="panel-heading row">CSS</div>
					<div class="panel-body">
						<div class="col-md-12">
							<p>
								Para otimizar a manutenção do código CSS utilizamos o pré-processador Stylus(.styl), e é como ficam salvos nossos arquivos CSS na pasta SRC.
							</p>
							<p>
								Para entender mais sobre as possibilidades que a Stylus Lang oferece acesse <a href="http://stylus-lang.com/" target="_blank">http://stylus-lang.com/</a>
							</p>
						</div>
						<div id="estrutura-css-globals">
							<div class="col-md-12">
								<h4>
									Globals
								</h4>
								<hr>
								<p>
									Pasta onde se encontram os frameworks css como Foundation, Boostrap, Basic e é onde devem ser adicionados outros frameworks CSS que o sistema utilizar, por padrão estes componentes são importados de forma específica em cada template da pasta Templates, de acordo com a necessidade do sistema. 
								</p>
								<p>
									Por boas práticas, os arquivos desta pasta não devem ser editados a fim de manter o padrão das versões de cada framework intacto. Alterações na estrutura CSS serão abordadas nos tópicos a seguir.
								</p>
							</div>
						<div id="estrutura-css-templates">
							<div class="col-md-12">
								<h4>
									Templates
								</h4>
								<hr>
									Pasta onde colocamos os arquivos base de cada template com as configurações necessárias a cada sistema, fazendo os imports dos globals e modules necessários.
									Cada template por padrão deve importar o arquivo config.styl, é nele onde são configuradas as cores padrões do sistema.</p>
								<p>Exemplo:
									login.styl - &gt; login.css
									main.styl - &gt; main.css</p>
							</div>
						</div>
						<div id="estrutura-css-modules">
							<div class="col-md-12">         
								<h4>
									Modules
								</h4>
								<hr>
								Pasta com os templates de cada módulo css que o sistema utiliza.
								<p>Exemplo:
								<pre>
		modules
		   |_buttons.styl -> módulo com todas as configurações dos botões do sistema
		   |_inputs.styl -> módulo com todas as configurações dos inputs do sistema
								</pre>
								</p>
							<p>Qualquer modificação CSS deve ser incluída nesta pasta no respectivo módulo referente e alteração. Caso o módulo ainda não exista ele pode ser criado.
								Por padrão os templates da pasta Templates importam todos os módulos existentes, e quando um novo módulo é adicionado ele é automaticamente importado e compilado
								junto aos módulos.</p>
							<p>Para compilar e ativar apenas as funcionalidades referente ao CSS use o comando</p>
								<div class="well well-sm">
									<kbd>
										gulp compile-css
									</kbd>
								</div>
								No prompt de comando dentro da pasta raíz do projeto web.
							<p>Por padrão é gerado o template main.css com as configurações principais do sistema e este é importado no cabeçalho do template.xhtml</p>
							</div>
						</div>
					</div>
				</div>
			</section>
			<section id="estrutura-js" class="row">
				<div class="panel panel-default col-md-12">
					<div class="panel-heading row">JS</div>
					<div class="panel-body">
						<div class="col-md-12">
							<p>
								Os códigos Javascript devem ser editados/adicionados à pasta src/js, seguindo a seguinte premissa:
							</p>
							<div class="alert alert-info">
								Códigos relacionados ao sistema em específico devem ser adicionados à pasta js/app
							</div>
							<div class="alert alert-info">
								Códigos de plugins e frameworks devem ser adicionados à pasta js/plugins
							</div>
							<p>A recomendação é que não se façam alterações em nenhum Javascript da pasta plugins com o intuito de adicionar funcionalidades ao sistema, para isso crie um novo .JS
								dentro da pasta js/app.</p>
							<p>Os arquivos JS usados de forma global, em todo o sistema, não precisam ser incluídos manualmente no template do sistema, basta acrescentar <kbd>__concat</kbd> ao nome
								do arquivo e ele será concatenado ao arquivo main.js</p>
						</div>
						<div class="col-md-6">
							<p>Exemplo:</p>
							<pre>
  src
    |_JS
        |_app
          |_login.js
          |_sistema__concat.js
          |_menu__concat.js
        |_plugins
          |_bootstrap__concat.js
          |_inputNumber.js
							</pre>
						</div>
						<div class="col-md-6">
							<p>Os arquivos serão otimizados e teremos como resultado:</p>
							<pre>
  dist
    |_JS
      |_main.js
      |_app
        |_login.js
      |_plugins
         |_inputNumber.js
	         				</pre>
         				</div>

						<div class="col-md-12">
							<p>No arquivo main.js estarão todos os arquivos que incluem a tag <kbd>__concat</kbd> na pasta src.</p>
							<p>Para compilar e ativar apenas as funcionalidades referente ao JS use o comando
								<div class="well well-sm">
									<kbd>
										gulp compile-js
									</kbd>
								</div>
								No prompt de comando dentro da pasta raíz do projeto web.</p>
							<p>O arquivo main.js é importado por padrão ao final do template.xhtml</p>
						</div>
					</div>
				</div>
			</section>
				
				
			<section id="estrutura-img" class="row">
				<div class="panel panel-default col-md-12">
					<div class="panel-heading row">IMG</div>
					<div class="panel-body">
						<div class="col-md-12">
							<p>As imagens dentro da pasta src/img serão automaticamente otimizadas ao se ativar as funcionalidades do VS Boilerplate.</p>
							<p>As versões otimizadas ficam dispostas na pasta dist/img, da mesma forma como as demais estruturas, não é recomendável adicionar imagens à pasta dist/img de forma manual, uma vez
								que isso não acarreta na otimização da mesma.</p>
							<p>Atualmente os formatos de otimização suportados são jpeg/png/gif, imagens que não são suportadas pela otimização são movidas automaticamente para a pasta dist.</p>
							<div class="alert alert-info">
								Para adicionar qualquer imagem ao sistema, utilize esta pasta.
							</div>
							<div class="alert alert-info">
								Lembre-se sempre de que o caminho para utilizar a imagem deve ser dist/img/(...) ao invés de src/img(...)
							</div>
						</div>
					</div>
				</div>
			</section>				

			<section id="estrutura-font" class="row">
				<div class="panel panel-default col-md-12">
					<div class="panel-heading row">Fonts</div>
					<div class="panel-body">
						<div class="col-md-12">
							<p>As fontes utilizadas no sistema devem ser adicionadas a esta pasta, automaticamente será gerada a versão @font-face css3 destas fontes, você não precisa se preocupar em importar esta fonte ao template, basta certificar-se que está fazendo a correta importação dentro do arquivo src/css/config.styl</p>
							
							<pre>
	fonts
	    |_ttf
							</pre>
						</div>
					</div>
				</div>
			</section>				

			<section id="recomendacoes" class="row">
				<h2>
					Recomendações
				</h2>
				<hr>
				<p>
					<ul>
						<li>Desabilite a validação da pasta <kbd>node_modules</kbd> em seu Eclipse caso não esteja configurado por padrão.</li>
						<li>Antes de comitar ou sincronizar com o SVN peça para o SVN ignorar a pasta <kbd>node_modules</kbd></li>
					</ul>
					Estas orientações irão garantir um ambiente melhor de desenvolvimento.
				</p>
				<hr>
				<br/>
				<br/>
				<br/>
				<br/>
				<br/>
				<br/>
			</section>
		</div>
	</div>
	<div id="package" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModal">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="gridSystemModalLabel">package.json</h4>
	      </div>
	      <div class="modal-body">
			<pre>
{
  "name": "NOME_DO_PROJETO",
  "version": "1.0.0",
  "main": "gulpfile.js",
  "dependencies": {
    "gulp": "^3.9.1"
  },
  "devDependencies": {
    "gulp-autoprefixer": "^3.1.1",
    "gulp-clean-css": "^2.0.13",
    "gulp-concat": "^2.6.0",
    "gulp-copy": "0.0.2",
    "gulp-cssbeautify": "^0.1.3",
    "gulp-data": "^1.2.1",
    "gulp-font2css": "^0.1.2",
    "gulp-fontgen": "^0.2.5",
    "gulp-iconfont": "^8.0.1",
    "gulp-image-optimization": "^0.1.3",
    "gulp-stylus": "^2.5.0",
    "gulp-uglify": "^2.0.0",
    "pump": "^1.0.1",
    "run-sequence": "^1.2.2"
  },
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Virtual Sistemas",
  "license": "ISC",
  "description": ""
}

			</pre>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	<div id="gulpfile" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModal">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="gridSystemModalLabel">gulpfile.js</h4>
	      </div>
	      <div class="modal-body">
			<pre>
var gulp = require('gulp');

var imageop = require('gulp-image-optimization');

var stylus = require('gulp-stylus');
var path = require('path');

const autoprefixer = require('gulp-autoprefixer');
 
var cleanCSS = require('gulp-clean-css');

var concat = require('gulp-concat');

var uglify = require('gulp-uglify');

var pump = require('pump');

var font2css = require('gulp-font2css').default;
 
var runTimestamp = Math.round(Date.now()/1000);

var mainDir = './src/main/webapp/resources/';
var sourceDir = mainDir+'src/';

var distDir = mainDir+'dist/';

var runSequence = require('run-sequence');    // Temporary solution until gulp 4 https://github.com/gulpjs/gulp/issues/355


//GERA ESTRUTURA DE PASTAS
gulp.task('vsboilerplate', function() {
  return gulp.src('./')
    .pipe(gulp.dest(sourceDir))
    //gera pastas css
    .pipe(gulp.dest(sourceDir+'css/globals/'))
    .pipe(gulp.dest(sourceDir+'css/templates'))
    .pipe(gulp.dest(sourceDir+'css/modules'))
    //gera pastas fonts
    .pipe(gulp.dest(sourceDir+'fonts/ttf'))
    //gera pasta img
    .pipe(gulp.dest(sourceDir+'img'))
    //gera pasta js
    .pipe(gulp.dest(sourceDir+'js/app'))
    .pipe(gulp.dest(sourceDir+'js/plugins'))
    //gera pasta dist
    .pipe(gulp.dest(distDir))
 });

//IMAGE OPTIMIZE 
gulp.task('images', function(cb) {
	gulp.src([sourceDir+'/img/**/*.png',sourceDir+'/img/**/*.svg']).pipe(imageop({
		optimizationLevel: 5,
		progressive: true,
		interlaced: true
	})).pipe(gulp.dest(distDir+'/img/')).on('end', cb).on('error', cb);
});


//COMPILA STYLUS
gulp.task('process-css', function () {
  return gulp.src(sourceDir+'/css/**/*.styl')
	.pipe(stylus())
	.pipe(gulp.dest(distDir+'/css/'));
});



//AUTO PREFIXER
gulp.task('add-prefixes', () =>
	gulp.src(distDir+'/css/*.css')
		.pipe(autoprefixer({
			browsers: ['last 2 versions'],
			cascade: false
		}))
		.pipe(gulp.dest(distDir+'/css/'))
);

//COMPRIME CSS
gulp.task('compress-css', function() {
  return gulp.src(distDir+'/css/*.css')
	.pipe(cleanCSS({compatibility: 'ie8', processImport: false}))
	.pipe(gulp.dest(distDir+'/css/'));
});


// Executa todas as funções relativas ao css
gulp.task('compile-css', function (done) {
	runSequence(
		'process-css',
		'add-prefixes',
		'compress-css',
	done);
	gulp.watch(sourceDir+'/css/**/*.styl', ['compile-css']);  // VERIFICA ALTERAÇÕES NOS ARQUIVOS stylus PARA COMPILAR EM TEMPO REAL
});


//FUNÇÕES JS

gulp.task('concat-js', function() {
  return gulp.src(sourceDir+'/js/**/*__concat.js')
	.pipe(concat('main.js'))
	.pipe(gulp.dest(distDir+'/js/'));
});

//COMPRESS JS
gulp.task('compress-js', function (cb) {
  pump([
		gulp.src(['!./src/main/webapp/resources/src/js/**/*__*.js',sourceDir+'/js/**/*.js',distDir+'/js/main.js']),
		uglify(),
		gulp.dest(distDir+'/js/')
	],
	cb
  );
});

// Executa todas as funções relativas ao js
gulp.task('compile-js', function (done) {
	runSequence(
		'concat-js',
		'compress-js',
	done);
	gulp.watch(sourceDir+'/js/**/*', ['compile-js']);  // VERIFICA ALTERAÇÕES NOS ARQUIVOS stylus PARA COMPILAR EM TEMPO REAL
});


//FONTS

gulp.task('gen-fonts', function() {
  return gulp.src(sourceDir+'/fonts/**/*.{otf,ttf,woff,woff2}')
	.pipe(font2css())
	.pipe(concat('fonts.css'))
	.pipe(gulp.dest(distDir+'/css/fonts/'))
})


gulp.task('compile-fonts', function (done) {
	runSequence(
		'gen-fonts',
		'process-css',
		'add-prefixes',
		'compress-css',
	done);
	gulp.watch(sourceDir+'/css/**/*.styl', ['compile-fonts']);  // VERIFICA ALTERAÇÕES NOS ARQUIVOS stylus PARA COMPILAR EM TEMPO REAL
});

gulp.task('compile-all', function (done) {
	runSequence(
		'images',
		'gen-fonts',
		'process-css',
		'add-prefixes',
		'compress-css',
	done);
});


// Default
gulp.task('default', ['build']);
			</pre>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
	
	<script src="js/jquery-3.1.1.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	  <!-- javascript -->
	<script type='text/javascript' src='js/show-your-terms.min.js'></script>
	<script>
		new ShowYourTerms('.instalacao-cmd');
		new ShowYourTerms('.utilizacao-cmd');
	</script>
</body>
</html>